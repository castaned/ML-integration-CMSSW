
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/castaned/ML-integration-CMSS/documentation/data_processing/01_set_config/">
      
      
        <link rel="prev" href="../../datasets/01_nanoaod/">
      
      
        <link rel="next" href="../02_processing/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Config - ML integration in CMSSW</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather+Sans:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Merriweather Sans";--md-code-font:"JetBrains Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#setting-configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ML integration in CMSSW" class="md-header__button md-logo" aria-label="ML integration in CMSSW" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ML integration in CMSSW
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Config
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="indigo"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="indigo"  aria-label="Night mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Night mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ML integration in CMSSW" class="md-nav__button md-logo" aria-label="ML integration in CMSSW" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ML integration in CMSSW
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CMS Machine Learning Framework
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Datasets
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Datasets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datasets/01_nanoaod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    nanoAOD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data processing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Data processing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#log-into-lxplus-server-cern-computers" class="md-nav__link">
    <span class="md-ellipsis">
      Log into LXPLUS server (CERN computers)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-the-required-cmssw-version" class="md-nav__link">
    <span class="md-ellipsis">
      Set up the required CMSSW version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clone-the-repository-and-compile" class="md-nav__link">
    <span class="md-ellipsis">
      Clone the repository and compile
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-grid-proxy-for-accessing-files" class="md-nav__link">
    <span class="md-ellipsis">
      Set up GRID proxy for accessing files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nanoaod-datasets-and-branch-selections" class="md-nav__link">
    <span class="md-ellipsis">
      NanoAOD datasets and branch selections
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_processing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Preprocessing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_random_sample_optional/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mixing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Training
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Training
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../training/01_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    training
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../training/02_lxplus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lxplus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../training/03_acarus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    acarus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#log-into-lxplus-server-cern-computers" class="md-nav__link">
    <span class="md-ellipsis">
      Log into LXPLUS server (CERN computers)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-the-required-cmssw-version" class="md-nav__link">
    <span class="md-ellipsis">
      Set up the required CMSSW version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clone-the-repository-and-compile" class="md-nav__link">
    <span class="md-ellipsis">
      Clone the repository and compile
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-grid-proxy-for-accessing-files" class="md-nav__link">
    <span class="md-ellipsis">
      Set up GRID proxy for accessing files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nanoaod-datasets-and-branch-selections" class="md-nav__link">
    <span class="md-ellipsis">
      NanoAOD datasets and branch selections
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="setting-configuration">Setting configuration</h1>
<p>Before starting, you need to create the environment and clone the GitHub repository. If you already have all your data prepared, simply clone the repository and proceed to <a href="training/01_intro.md">training section</a>, where you will find two options: running the training in LXPLUS and outside LXPLUS.</p>
<h3 id="log-into-lxplus-server-cern-computers">Log into LXPLUS server (CERN computers)</h3>
<div class="highlight"><pre><span></span><code>ssh<span class="w"> </span>username@lxplus.cern.ch
</code></pre></div>
<h3 id="set-up-the-required-cmssw-version">Set up the required CMSSW version</h3>
<div class="highlight"><pre><span></span><code>cmsrel<span class="w"> </span>CMSSW_13_3_0
cmsenv
<span class="nb">cd</span><span class="w"> </span>CMSSW_13_3_0/src
</code></pre></div>
<p>You will see many of directories inside <code>CMSSW_13_3_0/</code>, but you only need to work inside <code>src/</code> directory.</p>
<div class="admonition warning">
<p class="admonition-title">IMPORTANT</p>
<ol>
<li><code>cmsenv</code> needs to be executed every time you open a new terminal to activate the environment variables. You need to be inside <code>CMSSW_13_3_0/</code> directory.</li>
<li>The <a href="data_processing/01_set_config.md">Data processing section</a> has been tested only with the CMSSW_13_3_0 release. The training section is not affected.</li>
</ol>
</div>
<h3 id="clone-the-repository-and-compile">Clone the repository and compile</h3>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/castaned/ML-integration-CMSSW<span class="w"> </span>DeepNTuples
scram<span class="w"> </span>b<span class="w"> </span>-j<span class="w"> </span>N
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">IMPORTANT</p>
<p>Make sure not to change the name <code>DeepNTuples</code> for your local directory containing the GitHub repository, otherwise, it will not work.</p>
</div>
<p>In the second command, <code>N</code> represents the CPUs to use for compiling and building the code inside <code>src/</code> directory, which uses dependencies from the CMSSW system. If you are unsure about <code>N</code>, simply run <code>scram b</code> without the <code>-j</code> flag, it will use all the available CPUs.</p>
<div class="admonition note">
<p class="admonition-title">Resources</p>
<p>If you want to learn more about the CMSSW system, its structure, and commands, you can explore <a href="https://cms-opendata-workshop.github.io/workshop2022-lesson-cmssw/">Intro to CMSSW</a> and <a href="https://twiki.cern.ch/twiki/bin/view/CMSPublic/SWGuideBuildFile">CMSSW SCRAM</a>.</p>
</div>
<h3 id="set-up-grid-proxy-for-accessing-files">Set up GRID proxy for accessing files</h3>
<p>Ensure you have a valid GRID certificate. This is neccesary to have acces to the GRID, the distributed system used to retrieve the CERN data. If you don’t have a GRID certificate, follow the instructions <a href="https://twiki.cern.ch/twiki/bin/view/CMSPublic/WorkBookStartingGrid#ObtainingCert">here</a>. You need to generate the certificate and export it to the <code>~/.globus</code> directory in your LXPLUS user space, which is the standard location.</p>
<p>This certificate cannot be used directly, you need to use a proxy. The proxy is a temporary credential derived from your certificate. Now, generate the proxy (it will ask your GRID passphrase)</p>
<div class="highlight"><pre><span></span><code>voms-proxy-init<span class="w"> </span>--voms<span class="w"> </span>cms<span class="w"> </span>--valid<span class="w"> </span><span class="m">192</span>:00<span class="w"> </span>--out<span class="w"> </span><span class="nv">$HOME</span>/.globus/x509up_u<span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span>
</code></pre></div>
<p>This command created the proxy to be used with CMS data and sets its lifitime to 192 hours, if you do not specify this, it defaults to 12 hours, and 192 hours is the maximum allowed.</p>
<p>We store the proxy inside our home directory because it is safer and easier to use when submitting jobs. If you do not specify the output, it is stored by default in the <code>/tmp/</code> directory. The <code>x509up_u$(id -u)</code> format is a naming convention that includes your user ID.</p>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>When the time expires, you must execute the command again to renew the proxy.</p>
</div>
<p>Now, verify that the certificate was correctly generated. First, we need to tell the system where our proxy is located, as mentioned earlier, the default directory is <code>/tmp/</code>, and the system will not find it if we saved it elsewhere. Therefore, we export the actual location</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">X509_USER_PROXY</span><span class="o">=</span><span class="nv">$HOME</span>/.globus/x509up_u<span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span>
</code></pre></div>
<p>The next command shows us the proxy information</p>
<div class="highlight"><pre><span></span><code>voms-proxy-info<span class="w"> </span>--all
</code></pre></div>
<h3 id="nanoaod-datasets-and-branch-selections">NanoAOD datasets and branch selections</h3>
<p>CERN has a complex data retrieval system composed of different softwares and data centers. In general, people from the experiments, <em>e.g.</em> CMS colaborators, produce data format releases that contain information recorded by the detectors or generated by Monte Carlo (MC) simulations. These releases can be in formats such as RECO, AOD, NanoAOD, etc. The format of interest for us is <strong>NanoAOD</strong>.</p>
<p>These releases are datasets. Each dataset comes from an LHC run and contains different information about the recorded or simulated events. Multiples copies of these datasets exist across different data centers in the GRID. You can find more information about the nanoAOD releases in the GitLab project <a href="https://gitlab.cern.ch/cms-nanoAOD">cms-nanoAOD</a>.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>To access the gitlab repository, you must log in with your CERN account.</p>
</div>
<p>To locate the datasets you need, you use the <strong>Data Aggregation System (DAS)</strong>, it is a catalog that helps find the exact Logical File Names (LFNs) of the samples. DAS has its own query language, and the dataset paths follow a defined structure. You can find more information about DAS in <a href="https://twiki.cern.ch/twiki/bin/view/CMSPublic/WorkBookLocatingDataSamples">Locating Data Samples</a>.</p>
<p>Once you identify the actual LFN of your desired samples, you use an entry point (or redirector) in <strong>XRootD</strong> to reach the endpoint, the nearest datacenter from your location that hosts the samples. The data is not downloaded; instead, it is read efficiently through the XRootD protocol and accessed directly from the LXPLUS cluster. For more details, see <a href="https://twiki.cern.ch/twiki/bin/view/CMSPublic/WorkBookXrootdService">Using Xrootd Service (AAA) for Remote Data Access</a>. </p>
<p>To use the tool, you must create a text file with the following format</p>
<div class="admonition example">
<p class="admonition-title">Dataset path format file</p>
<p>/Some/Das/query1/NANOAOD1.root:ID_1</p>
<p>/Some/Das/query1/NANOAOD2.root:ID_1</p>
<p>...</p>
<p>/Some/Das/query2/NANOAOD1.root:ID_2</p>
<p>/Some/Das/query2/NANOAOD2.root:ID_2</p>
<p>...</p>
<p>/Some/Das/queryn/NANOAODn.root:ID_n</p>
</div>
<p>Esch ROOT file is associated with an ID. Root files from the same data release share the same ID. This ID will be the target variable in the model used to classify the physical phenomenon.</p>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>The IDs need to be natural numbers.</p>
</div>
<p>If you need help identifying your samples' FLN, refer again to <a href="https://twiki.cern.ch/twiki/bin/view/CMSPublic/WorkBookLocatingDataSamples">Locating Data Samples</a>. If you already know the sample FLN and want to use all root files in it, you can use the script <code>map_DASquery.py</code> as follow </p>
<p><div class="highlight"><pre><span></span><code>map_DASquery.py<span class="w"> </span>/Some/Das/query/NANOAOD1<span class="w"> </span>...<span class="w"> </span>/Some/Das/query/NANOAOD2<span class="w"> </span>datasets_FLN_filename.txt
</code></pre></div>
The file is located in <code>DeepNTuples/MyNanoAODTools</code> directory.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>